!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Keylani=t():e.Keylani=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports={__KEYLANI_BINDINGS__:{},__KEYLANI_SETTINGS__:{loudClass:"keylani-loud",loudDataClass:"keylani-loud-data",loudCharClass:"keylani-loud-char",paintClass:"keylani-binding",keybindingAttr:"[data-keybind]",defaultLoudTimer:700,stateTimeout:1500,hasRun:!1,maxKeyLength:0}}},function(e,t,n){var o=n(0),a=n(2).__loudText;function d(e){e.preventDefault(),e.stopPropagation()}function i(e){e.matchCount=0,e.combo=""}function l(e,t,n,o){var d=t.binding,i=t.label,l={key:e,label:i,code:o.code,keyCode:o.keyCode,pressed:o.pressed};o.key=e,o.label=i,o.showLoudData=n.showLoudData,a(o,n.loudTimer),"function"==typeof d&&d(l)}e.exports={__readKeys:function(e,t){return function(n){var a,r,_=n.key,s=o.__KEYLANI_BINDINGS__[_];if(t.matchCount++,function(e,t,n){e.combo.length?(e.combo+="+".concat(n),e.code+="+".concat(t.code),e.keyCode+="+".concat(t.keyCode)):(e.combo=n,e.code=t.code,e.keyCode=t.keyCode)}(t,n,_),a=_,r=o.__KEYLANI_BINDINGS__,-1===["CapsLock","Enter","Shift"].indexOf(a)||r[a]||i(t),setInterval(function(){1===t.combo.length&&i(t)},o.__KEYLANI_SETTINGS__.stateTimeout),1===t.matchCount&&s&&s.when&&(d(n),l(_,s,e,{code:t.code,keyCode:t.keyCode,pressed:++s.pressed}),i(t)),o.__KEYLANI_BINDINGS__[t.combo]&&o.__KEYLANI_BINDINGS__[t.combo].when){d(n);var c=++o.__KEYLANI_BINDINGS__[t.combo].pressed;l(t.combo,o.__KEYLANI_BINDINGS__[t.combo],e,{code:t.code,keyCode:t.keyCode,pressed:c}),i(t)}else t.matchCount>=o.__KEYLANI_SETTINGS__.maxKeyLength&&i(t)}},__isValidateOpts:function(e){return Object.prototype.toString.call(e).includes("Object")&&"loud"in e&&"style"in e&&"keyshow"in e&&("string"==typeof e.style||Object.prototype.toString.call(e).includes("Object"))&&"boolean"==typeof e.loud&&"boolean"==typeof e.keyshow},__addToBindings:function(e,t,n,a){var d={},i=(e=e.replace(/\s/g,"")).split("+").length;o.__KEYLANI_SETTINGS__.maxKeyLength=i>o.__KEYLANI_SETTINGS__.maxKeyLength?i:o.__KEYLANI_SETTINGS__.maxKeyLength,d[e]={key:e,binding:t,label:n,when:a,pressed:0},o.__KEYLANI_BINDINGS__[e]=d[e]}}},function(e,t,n){var o=n(0);e.exports={__loudPanel:function(e){if(e.loud){var t=document.head,n=document.body,a=document.createElement("style"),d=document.createElement("div"),i=document.createElement("span");a.type="text/css",d.className=o.__KEYLANI_SETTINGS__.loudClass,d.style="display: none;",i.className=o.__KEYLANI_SETTINGS__.loudCharClass;var l="\n\t\t\t.keylani-loud {\n\t\t\t\tmax-width: 200%;\n\t\t\t\tmargin: auto;\n\t\t\t\ttext-align: center;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\toverflow: hidden;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\ttransition: all 1s;\n\t\t\t\tz-index: 999999999;\n\t\t\t}\n\n\t\t\t.keylani-loud-data {\n\t\t\t\twhite-space: nowrap;\n\t\t\t\toverflow: hidden;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t}\n\t\t";if(a.styleSheet?a.styleSheet.cssText=l:a.appendChild(document.createTextNode(l)),t.appendChild(a),d.appendChild(i),e.showLoudData){var r=document.createElement("p"),_=document.createElement("p"),s=document.createElement("p"),c=document.createElement("p");r.className=o.__KEYLANI_SETTINGS__.loudDataClass,_.className=o.__KEYLANI_SETTINGS__.loudDataClass,s.className=o.__KEYLANI_SETTINGS__.loudDataClass,c.className=o.__KEYLANI_SETTINGS__.loudDataClass,d.appendChild(c),d.appendChild(_),d.appendChild(r),d.appendChild(s)}n.appendChild(d)}},__loudText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.__KEYLANI_SETTINGS__.defaultLoudTimer;if(o.__KEYLANI_BINDINGS__[e.key]){var n=document.getElementsByClassName(o.__KEYLANI_SETTINGS__.loudClass)[0];n&&(n.style="display: block;",n.children[0].innerText=e.key,e.showLoudData&&(n.children[1].innerText=e.label,n.children[2].innerText=e.pressed,n.children[3].innerText=e.code,n.children[4].innerText=e.keyCode),setTimeout(function(){n.style="display: none;",n.children[0].innerText="",e.showLoudData&&(n.children[1].innerText="",n.children[2].innerText="",n.children[3].innerText="",n.children[4].innerText="")},t||o.__KEYLANI_SETTINGS__.defaultLoudTimer))}}}},function(e,t,n){var o=n(0),a=n(1),d=a.__isValidateOpts,i=a.__readKeys,l=a.__addToBindings,r=n(4);function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"string"==typeof e&&"function"==typeof t&&"string"==typeof n&&"boolean"==typeof o?(l(e,t,n,o),1):0}e.exports={listen:function(e){if(!o.__KEYLANI_SETTINGS__.hasRun&&d(e)){var t=JSON.parse(JSON.stringify(e));r.__addLoudPanel(t),r.__listenDOM(t);window.addEventListener("keydown",i(t,{matchCount:0,combo:"",codes:"",keycodes:""})),o.__KEYLANI_SETTINGS__.hasRun=!0}},bind:_,map:function(e){if(Object.prototype.toString.call(e).includes("Object")){var t=JSON.parse(JSON.stringify(e));for(var n in t)"bind"in e[n]&&"label"in e[n]&&"when"in e[n]&&_(n,e[n].bind,e[n].label,e[n].when)}},getAllBindings:function(){return o.__KEYLANI_BINDINGS__}}},function(e,t,n){var o=n(0),a=n(1).__addToBindings,d=n(2).__loudPanel;function i(e){return e&&e.includes(":")?(e=e.replace(/\s/g,"")).split(":"):[]}function l(e,t){if(l=e.keyshow,(r=t)&&r.dataset&&r.dataset.keybind&&l&&void 0===r.dataset.keyshow||"true"===r.dataset.keyshow){var n=document.createElement("span");n.className=o.__KEYLANI_SETTINGS__.paintClass;var a=i(t.dataset.keybind);if(a.length){if(n.innerHTML=a[0],"string"==typeof e.style)n.className+=" ".concat(e.style);else for(var d in e.style)n.style[d]=e.style[d];t.appendChild(n)}}var l,r}e.exports={__listenDOM:function(e){for(var t=document.querySelectorAll(o.__KEYLANI_SETTINGS__.keybindingAttr),n=0;n<t.length;n++){var d=t[n],r=i(d.dataset.keybind);l(e,d),r.length&&a(r[0],window[r[1]]||null,d.dataset.keylabel||"","false"!==d.dataset.keywhen)}},__addLoudPanel:function(e){d(e)}}}])});